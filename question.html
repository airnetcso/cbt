<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soal Ujian Korea</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 0; min-height: 100vh; display: flex; flex-direction: column; }
        .top-bar { background: white; padding: 15px 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-align: center; font-size: 20px; font-weight: bold; color: #2c3e50; }
        .content { flex: 1; display: flex; flex-direction: column; padding: 20px; gap: 30px; }
        @media (min-width: 768px) { .content { flex-direction: row; } }
        .options-column { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .question-column { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); flex: 1; display: flex; flex-direction: column; }
        .question-text { font-size: 1.5em; line-height: 1.8; margin-bottom: 20px; flex: 1; }
        .question-img { max-width: 100%; height: auto; margin-top: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); align-self: center; }
        .audio-control { margin-top: auto; padding: 20px; background: #f0f2f5; border-radius: 12px; text-align: center; }
        audio { width: 100%; max-width: 450px; margin-bottom: 15px; }
        .replay-btn { background: #3498db; color: white; padding: 12px 28px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; }
        .replay-btn:disabled { background: #bdc3c7; cursor: not-allowed; }
        .replay-count { display: block; margin-top: 15px; font-weight: bold; font-size: 16px; color: #e74c3c; }

        /* Tombol Pilihan Ganda dengan Angka di Bulatan */
        .options label {
            position: relative;
            padding-left: 70px;
            margin: 20px 0;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            min-height: 60px;
        }
        .options input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        .options .circle {
            position: absolute;
            left: 0;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ecf0f1;
            border: 3px solid #bdc3c7;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 24px;
            color: #2c3e50;
            transition: all 0.3s;
        }
        .options input[type="radio"]:checked + .circle {
            background: #27ae60;
            border-color: #27ae60;
            color: white;
        }
        .options label:hover .circle {
            border-color: #3498db;
            transform: scale(1.1);
        }
        .options .text {
            flex: 1;
            padding-left: 10px;
        }

        .bottom-nav { background: white; padding: 15px; box-shadow: 0 -4px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap; }
        .nav-btn { padding: 14px 20px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; flex: 1; min-width: 100px; }
        .prev-btn { background: #3498db; color: white; }
        .back-btn { background: #e91e63; color: white; }
        .next-btn { background: #2ecc71; color: white; }
        .nav-btn:disabled { background: #bdc3c7; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="top-bar" id="questionTitle">Soal ...</div>
    <div class="content">
        <div class="options-column">
            <div class="options" id="options"></div>
        </div>
        <div class="question-column">
            <div class="question-text" id="questionText">Memuat soal...</div>
            <img id="questionImg" class="question-img" style="display:none;" alt="Gambar soal">
            <div class="audio-control" id="audioControl" style="display:none;">
                <audio id="audioPlayer" controls></audio>
                <button class="replay-btn" id="replayBtn">Replay dari Awal</button>
                <span class="replay-count" id="replayCount">Sisa kesempatan dengar: 2</span>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn prev-btn" id="prevBtn">◄ Sebelumnya</button>
        <button class="nav-btn back-btn">Kembali ke Navigasi</button>
        <button class="nav-btn next-btn" id="nextBtn">Berikutnya ►</button>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const currentQ = parseInt(urlParams.get('q')) || 0;
        let answers = JSON.parse(localStorage.getItem('answers')) || new Array(40).fill(null);
        let playCount = 2;

        const questions = [
            // Listening 1-20
            { question: "Dengarkan percakapan. Apa yang dipesan oleh pelanggan di restoran?", options: ["Bibimbap", "Kimchi jjigae", "Bulgogi", "Samgyeopsal"], answer: 0, audio: "audio/audio1.mp3", image: "images/listening1.jpg" },
            { question: "Dengarkan dan pilih ucapan selamat tinggal yang benar.", options: ["안녕하세요", "감사합니다", "안녕히 가세요", "좋은 하루 되세요"], answer: 2, audio: "audio/audio2.mp3" },
            { question: "Apa arti dari percakapan di stasiun kereta?", options: ["Mau ke Busan", "Mau ke Jeju", "Mau ke Seoul", "Mau ke Incheon"], answer: 2, audio: "audio/audio3.mp3", image: "images/listening3.jpg" },
            { question: "Dengarkan pengumuman. Kereta berangkat pukul berapa?", options: ["10:30", "11:00", "11:30", "12:00"], answer: 1, audio: "audio/audio4.mp3" },
            { question: "Di mana tempat yang dibicarakan dalam dialog?", options: ["Rumah sakit", "Sekolah", "Toko buku", "Kafe"], answer: 3, audio: "audio/audio5.mp3", image: "images/listening5.jpg" },
            { question: "Apa hobi yang disebutkan oleh pembicara?", options: ["Berenang", "Membaca buku", "Menonton drama", "Bermain game"], answer: 2, audio: "audio/audio6.mp3" },
            { question: "Dengarkan ramalan cuaca. Besok cuacanya bagaimana?", options: ["Cerah", "Hujan", "Berawan", "Salju"], answer: 1, audio: "audio/audio7.mp3", image: "images/listening7.jpg" },
            { question: "Pembicara sedang membicarakan musim apa?", options: ["Musim semi", "Musim panas", "Musim gugur", "Musim dingin"], answer: 2, audio: "audio/audio8.mp3" },
            { question: "Apa nama makanan yang disebutkan?", options: ["Tteokbokki", "Kimbap", "Ramyeon", "Jajangmyeon"], answer: 0, audio: "audio/audio9.mp3", image: "images/listening9.jpg" },
            { question: "Berapa harga tiket yang disebutkan?", options: ["15,000 won", "20,000 won", "25,000 won", "30,000 won"], answer: 1, audio: "audio/audio10.mp3" },
            { question: "Dengarkan instruksi. Ke mana harus berbelok?", options: ["Kiri", "Kanan", "Lurus", "Putar balik"], answer: 1, audio: "audio/audio11.mp3", image: "images/listening11.jpg" },
            { question: "Apa pekerjaan orang yang diwawancarai?", options: ["Dokter", "Guru", "Programmer", "Desainer"], answer: 2, audio: "audio/audio12.mp3" },
            { question: "Dengarkan dan pilih jawaban yang tepat untuk '어디 살아요?'", options: ["서울", "학교", "집", "회사"], answer: 0, audio: "audio/audio13.mp3" },
            { question: "Pembicara sedang memesan berapa orang?", options: ["2 orang", "3 orang", "4 orang", "5 orang"], answer: 2, audio: "audio/audio14.mp3" },
            { question: "Apa yang hilang dari pembicara?", options: ["Dompet", "Ponsel", "Kunci", "Tas"], answer: 1, audio: "audio/audio15.mp3" },
            { question: "Dengarkan jam. Sekarang jam berapa?", options: ["3:15", "3:30", "3:45", "4:00"], answer: 2, audio: "audio/audio16.mp3" },
            { question: "Apa hubungan antara kedua pembicara?", options: ["Teman", "Kakak-adik", "Guru-murid", "Atasan-bawahan"], answer: 0, audio: "audio/audio17.mp3" },
            { question: "Di mana percakapan ini terjadi?", options: ["Bandara", "Terminal bus", "Stasiun kereta", "Pelabuhan"], answer: 0, audio: "audio/audio18.mp3" },
            { question: "Apa rencana akhir pekan pembicara?", options: ["Pergi hiking", "Nonton bioskop", "Belanja", "Tidur"], answer: 1, audio: "audio/audio19.mp3" },
            { question: "Pembicara menyukai K-pop grup apa?", options: ["BTS", "BLACKPINK", "TWICE", "EXO"], answer: 0, audio: "audio/audio20.mp3" },
            // Reading 21-40
            { question: "Baca teks: '저는 매일 아침 7시에 일어나요. 그리고 학교에 가요.'<br>Pembicara bangun jam berapa?", options: ["6 pagi", "7 pagi", "8 pagi", "9 pagi"], answer: 1, image: "images/reading21.jpg" },
            { question: "Baca: '이 가게는 10시부터 9시까지 영업해요.'<br>Toko buka sampai jam berapa?", options: ["8 malam", "9 malam", "10 malam", "11 malam"], answer: 1 },
            { question: "Baca pengumuman: '내일 학교 쉬어요.'<br>Artinya besok...", options: ["Ada ujian", "Libur sekolah", "Ada acara", "Masuk seperti biasa"], answer: 1, image: "images/reading23.jpg" },
            { question: "Baca: '김치찌개는 매워요. 불고기는 달아요.'<br>Makanan mana yang pedas?", options: ["Bibimbap", "Kimchi jjigae", "Bulgogi", "Kimbap"], answer: 1 },
            { question: "Baca teks tentang Seoul. Ibukota Korea adalah...", options: ["Busan", "Incheon", "Seoul", "Jeju"], answer: 2, image: "images/reading25.jpg" },
            { question: "Baca: '한글은 세종대왕이 만들었어요.'<br>Siapa yang menciptakan Hangul?", options: ["Yi Sun-sin", "Sejong Agung", "Gwanggaeto", "Dae Jo-yeong"], answer: 1 },
            { question: "Baca jadwal kereta: '서울 → 부산 14:30 출발'<br>Kereta berangkat jam...", options: ["13:30", "14:00", "14:30", "15:00"], answer: 2, image: "images/reading27.jpg" },
            { question: "Baca menu: '아메리카노 4,000원, 카페라떼 4,500원'<br>Yang lebih mahal adalah...", options: ["Americano", "Cafe latte", "Kedua sama", "Tidak disebutkan"], answer: 1 },
            { question: "Baca: '제 취미는 독서예요. 책을 좋아해요.'<br>Hobi pembicara adalah...", options: ["Olahraga", "Membaca buku", "Musik", "Memasak"], answer: 1, image: "images/reading29.jpg" },
            { question: "Baca ramalan cuaca: '주말에 비가 와요.'<br>Akhir pekan akan...", options: ["Cerah", "Hujan", "Berangin", "Salju"], answer: 1 },
            { question: "Baca: '한국 드라마를 자주 봐요. 특히 로맨틱 코미디를 좋아해요.'<br>Pembicara suka drama genre...", options: ["Thriller", "Romantic comedy", "Historical", "Action"], answer: 1, image: "images/reading31.jpg" },
            { question: "Baca papan nama: '출구 →'<br>Artinya arah ke...", options: ["Masuk", "Keluar", "Toilet", "Tangga"], answer: 1 },
            { question: "Baca: '이 옷은 작아요. 큰 사이즈 있어요?'<br>Pembicara bilang baju itu...", options: ["Terlalu besar", "Terlalu kecil", "Pas", "Mahal"], answer: 1 },
            { question: "Baca undangan: '생일 파티 토요일 6시 제 집'<br>Pesta ulang tahun diadakan hari...", options: ["Jumat", "Sabtu", "Minggu", "Senin"], answer: 1 },
            { question: "Baca: '지하철 2호선 타세요.'<br>Naik jalur subway nomor...", options: ["1", "2", "3", "4"], answer: 1 },
            { question: "Baca resep: '먼저 밥을 짓고, 김치를 넣어요.'<br>Langkah pertama adalah...", options: ["Potong kimchi", "Masak nasi", "Tambah telur", "Aduk"], answer: 1 },
            { question: "Baca: '저는 한국어가 조금 할 수 있어요.'<br>Pembicara bisa bahasa Korea...", options: ["Lancar", "Sedikit", "Tidak sama sekali", "Seperti native"], answer: 1 },
            { question: "Baca iklan: '특별 할인! 50% OFF'<br>Diskon berapa persen?", options: ["30%", "40%", "50%", "70%"], answer: 2 },
            { question: "Baca: '가족은 4명이에요. 아버지, 어머니, 언니, 나.'<br>Pembicara punya kakak...", options: ["Adik laki", "Adik perempuan", "Kakak perempuan", "Kakak laki"], answer: 2 },
            { question: "Baca: '오늘은 2025년 12월 28일 일요일입니다.'<br>Hari ini adalah hari...", options: ["Senin", "Sabtu", "Minggu", "Jumat"], answer: 2 }
        ];

        function loadQuestion() {
            const q = questions[currentQ];
            document.getElementById('questionTitle').textContent = `Soal ${currentQ + 1} - ${currentQ < 20 ? 'Listening' : 'Reading'}`;
            document.getElementById('questionText').innerHTML = q.question;

            // Pilihan ganda dengan tombol bulat angka
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = q.options.map((opt, idx) => `
                <label>
                    <input type="radio" name="answer" value="${idx}" ${answers[currentQ] === idx ? 'checked' : ''}>
                    <div class="circle">${idx + 1}</div>
                    <span class="text">${opt}</span>
                </label>
            `).join('');

            document.querySelectorAll('input[name="answer"]').forEach(input => {
                input.onchange = () => {
                    answers[currentQ] = parseInt(input.value);
                    localStorage.setItem('answers', JSON.stringify(answers));
                };
            });

            // Gambar
            const img = document.getElementById('questionImg');
            if (q.image) {
                img.src = q.image;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }

            // Audio listening
            if (currentQ < 20 && q.audio) {
                const audio = document.getElementById('audioPlayer');
                audio.src = q.audio;
                document.getElementById('audioControl').style.display = 'block';
                playCount = 2;
                updatePlayCount();

                audio.onplay = () => {
                    if (playCount > 0) playCount--;
                    updatePlayCount();
                };

                document.getElementById('replayBtn').onclick = () => {
                    if (playCount > 0) {
                        audio.currentTime = 0;
                        audio.play();
                    }
                };
            } else {
                document.getElementById('audioControl').style.display = 'none';
            }

            document.getElementById('prevBtn').disabled = currentQ === 0;
            document.getElementById('nextBtn').disabled = currentQ === 39;
        }

        function updatePlayCount() {
            document.getElementById('replayCount').textContent = `Sisa kesempatan dengar: ${playCount}`;
            const disabled = playCount === 0;
            document.getElementById('audioPlayer').disabled = disabled;
            document.getElementById('replayBtn').disabled = disabled;
            if (disabled) document.getElementById('audioPlayer').controls = false;
        }

        document.getElementById('prevBtn').onclick = () => { if (currentQ > 0) window.location.href = `question.html?q=${currentQ - 1}`; };
        document.getElementById('nextBtn').onclick = () => { if (currentQ < 39) window.location.href = `question.html?q=${currentQ + 1}`; };
        document.querySelector('.back-btn').onclick = () => window.location.href = 'exam.html';

        loadQuestion();
    </script>
</body>
</html>
